<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap">
    <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
    <script defer src ="./index.js"></script>       
</head>
<body>

     <section class="cta">
    <div class="container">
      <div class="registration">
      <form action="/login" method="post"  id="login_form" onsubmit="login(event)">
        <div class="title-card">Welcome back</div>
        <div style="color: yellow; font-size: 120%;">Log in to your account</div>
        <div  style="font-size: 100%;" id="login-emptyfield-error" class="error"></div>
        <div id="error-message" style="color: red;"></div><br>
        <label for="username"><img src="username.png" alt="username Icon"><input style="width: 95%" type="text" name="username" id="login_username" placeholder="Username" class="placeholder-red"></label><br><br>
        <label for="username"><img src="password.png" alt="username Icon"><input style="width: 95%" type="password" name="password" id="login_password" placeholder="Password" class="placeholder-red"></label><br><br>
         <button type="submit">Log in</button><br><br>
    <div style="color: white;">Forgot password?<a href="passwordreset.html" style="color: yellow;"> Reset</a><br><br>
    <div>Don't have account?<a href="register.html" style="color: yellow;"> Sign Up</a></div></div>
    </form>
    </div>
    </div>
    </section>
	<footer>
    <p>&copy; 2024 Promotecryptoafrica. All rights reserved.</p>
  </footer>
 <script>    
function loginsuccessful() {
  var loginsuccessful = document.getElementById('loginsuccessful');
  
  loginsuccessful.style.display = 'block';

  // Automatically hide the floating card after 3 seconds
  setTimeout(function() {
      loginsuccessful.style.display = 'none';
  }, 2000);
}
function displayErrorMessages() {
    const urlParams = new URLSearchParams(window.location.search);
    const error = urlParams.get('error');

    if (error === 'user_not_found') {
      document.getElementById('error-message').textContent = 'Wrong username.';
    } else if (error === 'incorrect_password') {
      document.getElementById('error-message').textContent = 'Incorrect password.';
    } else if (error === 'server_error') {
      document.getElementById('error-message').textContent = 'We did not find such user in our records.';
    }else{
      loginsuccessful();
    }
  }

 
  // Get the error message on window load
  window.onload = function () {
    displayErrorMessages();
  };
</script>
</body>
</html>
